# üìù Cursor Planning - Clone Notion (Lovable Project)

## üéØ Vis√£o Geral do Projeto

Este √© um clone do Notion constru√≠do com tecnologias web modernas, focando em oferecer uma experi√™ncia de edi√ß√£o de documentos hier√°rquica e colaborativa, similar ao Notion original.

**Nome do Projeto:** Notion Clone  
**Status:** üü° Em Desenvolvimento Ativo  
**√öltima Atualiza√ß√£o:** 2025-10-09

---

## üõ†Ô∏è Stack Tecnol√≥gica

### **Frontend**
- **React 18.3.1** - Biblioteca UI principal
- **TypeScript 5.8.3** - Tipagem est√°tica
- **Vite 5.4.19** - Build tool e dev server
- **TailwindCSS 3.4.17** - Estiliza√ß√£o utility-first
- **React Router DOM 6.30.1** - Roteamento client-side

### **UI Components & Libraries**
- **Radix UI** - Componentes acess√≠veis e sem estilo (30+ componentes)
- **shadcn/ui** - Sistema de componentes baseado em Radix
- **Lucide React 0.462.0** - Biblioteca de √≠cones
- **Next Themes 0.3.0** - Gerenciamento de temas (dark/light)
- **Sonner 1.7.4** - Toast notifications elegantes
- **cmdk 1.1.1** - Command menu (Ctrl+K)

### **State Management & Data Fetching**
- **TanStack React Query 5.83.0** - Server state management
- **React Hook Form 7.61.1** - Gerenciamento de formul√°rios
- **Zod 3.25.76** - Valida√ß√£o de schemas

### **Drag & Drop**
- **@dnd-kit/core 6.3.1** - Core do drag and drop
- **@dnd-kit/sortable 10.0.0** - Utilit√°rios para listas orden√°veis
- **@dnd-kit/utilities 3.2.2** - Helpers e utilities

### **Backend (Lovable Cloud / Supabase)**
- **Supabase 2.58.0** - Backend-as-a-Service
  - PostgreSQL Database
  - Row Level Security (RLS)
  - Authentication
  - Real-time subscriptions (n√£o implementado ainda)
  - Storage (n√£o implementado ainda)

### **Utilities**
- **date-fns 3.6.0** - Manipula√ß√£o de datas
- **use-debounce 10.0.6** - Debounce hooks
- **clsx 2.1.1** - Utilidades de className
- **tailwind-merge 2.6.0** - Merge de classes Tailwind

---

## üóÇÔ∏è Estrutura de Banco de Dados

### **Tabelas Criadas**

#### 1. **`profiles`**
```sql
- id (UUID, PK) ‚Üí Referencia auth.users
- full_name (TEXT)
- avatar_url (TEXT)
- created_at (TIMESTAMP)
- updated_at (TIMESTAMP)
```
**RLS Policies:**
- ‚úÖ Users can view all profiles
- ‚úÖ Users can insert own profile
- ‚úÖ Users can update own profile
- ‚ùå DELETE bloqueado

**Trigger:**
- `handle_new_user()` - Cria profile automaticamente ao criar usu√°rio

---

#### 2. **`pages`**
```sql
- id (UUID, PK)
- user_id (UUID, FK ‚Üí profiles)
- title (TEXT, DEFAULT 'Untitled')
- is_favorite (BOOLEAN, DEFAULT false)
- parent_id (UUID, FK ‚Üí pages) ‚Üê Hierarquia
- position (INTEGER, DEFAULT 0)
- icon (TEXT, nullable)
- created_at (TIMESTAMP)
- updated_at (TIMESTAMP)
```
**RLS Policies:**
- ‚úÖ Users can view own pages
- ‚úÖ Users can insert own pages
- ‚úÖ Users can update own pages
- ‚úÖ Users can delete own pages

**Trigger:**
- `update_updated_at_column()` - Atualiza `updated_at` automaticamente

**Features Implementadas:**
- ‚úÖ P√°ginas hier√°rquicas (nested pages via `parent_id`)
- ‚úÖ Favoritos (`is_favorite`)
- ‚úÖ Reordena√ß√£o (`position`)
- ‚úÖ √çcones customizados (`icon`)

---

#### 3. **`blocks`**
```sql
- id (UUID, PK)
- page_id (UUID, FK ‚Üí pages)
- type (TEXT) ‚Üê Tipo do bloco
- content (TEXT)
- metadata (JSONB, DEFAULT '{}')
- parent_block_id (UUID, FK ‚Üí blocks) ‚Üê Blocos nested
- position (INTEGER, DEFAULT 0)
- created_at (TIMESTAMP)
- updated_at (TIMESTAMP)
```
**RLS Policies:**
- ‚úÖ Users can view blocks of own pages
- ‚úÖ Users can insert blocks on own pages
- ‚úÖ Users can update blocks of own pages
- ‚úÖ Users can delete blocks of own pages

**Tipos de Blocos Suportados:**
- `paragraph` - Texto normal
- `heading1`, `heading2`, `heading3` - T√≠tulos
- `bulleted-list`, `numbered-list` - Listas
- `code` - C√≥digo com syntax highlighting (manual)
- `quote` - Cita√ß√µes
- `callout` - Alertas coloridos (info, warning, success, error, note)
- `toggle` - Blocos expans√≠veis com children
- `image` - Upload de imagens (base64, **n√£o integrado com Storage**)
- `divider` - Linha horizontal

---

#### 4. **`templates`**
```sql
- id (UUID, PK)
- user_id (UUID, FK ‚Üí profiles)
- name (TEXT)
- description (TEXT)
- blocks (JSONB) ‚Üê Blocos salvos como JSON
- is_public (BOOLEAN, DEFAULT false)
- created_at (TIMESTAMP)
```
**RLS Policies:**
- ‚úÖ Users can view public templates OR own templates
- ‚úÖ Users can insert own templates
- ‚úÖ Users can update own templates
- ‚úÖ Users can delete own templates

**Status:** üî¥ **Tabela criada, mas N√ÉO integrada no frontend**

---

## üé® Features Implementadas

### ‚úÖ **1. Autentica√ß√£o Completa**
**Arquivos:**
- `src/contexts/AuthContext.tsx` - Context global de auth
- `src/pages/Auth.tsx` - Tela de login/signup
- `src/components/ProtectedRoute.tsx` - Prote√ß√£o de rotas

**Funcionalidades:**
- ‚úÖ Sign Up com email + senha
- ‚úÖ Login com email + senha
- ‚úÖ Logout
- ‚úÖ Auto-confirm de emails (Supabase configurado)
- ‚úÖ Redirecionamento autom√°tico se autenticado
- ‚úÖ Prote√ß√£o de rotas via `ProtectedRoute`

**Observa√ß√µes:**
- ‚ùå N√£o suporta OAuth (Google, GitHub)
- ‚ùå Sem reset de senha implementado

---

### ‚úÖ **2. Editor de Blocos (Notion-like)**
**Arquivos:**
- `src/components/Editor.tsx` - Editor principal
- `src/components/RichTextEditor.tsx` - Editor de texto rico
- `src/components/SlashMenu.tsx` - Menu de comandos (/)

**Funcionalidades:**
- ‚úÖ **Slash Commands (/)** - Menu para criar blocos
- ‚úÖ **Rich Text Editing:**
  - Bold (`Ctrl+B`)
  - Italic (`Ctrl+I`)
  - Underline (`Ctrl+U`)
  - Inline Code
  - Links
- ‚úÖ **Toolbar Flutuante** - Aparece ao selecionar texto
- ‚úÖ **Drag & Drop de Blocos** - Reordena√ß√£o visual
- ‚úÖ **Hover Actions:**
  - GripVertical - Para arrastar
  - Plus - Para adicionar bloco
  - Delete - Para apagar (em nested blocks)
- ‚úÖ **Keyboard Navigation:**
  - `Enter` - Criar novo bloco
  - `Backspace` - Deletar bloco vazio
  - Foco autom√°tico no bloco anterior

**Blocos Especiais:**
- ‚úÖ **CalloutBlock** - 5 tipos (info, warning, success, error, note)
- ‚úÖ **CodeBlock** - Com bot√£o "Copy to clipboard"
- ‚úÖ **ImageBlock** - Upload via drag/drop ou clique
- ‚úÖ **ToggleBlock** - Blocos expans√≠veis com children
- ‚úÖ **QuoteBlock** - Cita√ß√µes estilizadas

**Limita√ß√µes:**
- ‚ùå Imagens salvam como base64 (n√£o usa Supabase Storage)
- ‚ùå N√£o suporta Markdown import/export
- ‚ùå N√£o suporta colabora√ß√£o em tempo real
- ‚ùå N√£o suporta mentions (@user)
- ‚ùå N√£o suporta tabelas

---

### ‚úÖ **3. Sidebar com Hierarquia de P√°ginas**
**Arquivos:**
- `src/components/Sidebar.tsx` - Sidebar principal
- `src/hooks/usePageHierarchy.ts` - L√≥gica de √°rvore hier√°rquica
- `src/hooks/usePages.ts` - CRUD de p√°ginas

**Funcionalidades:**
- ‚úÖ **P√°ginas Hier√°rquicas (Nested Pages):**
  - P√°ginas podem ter filhas via `parent_id`
  - Renderiza√ß√£o recursiva com indenta√ß√£o
  - √çcones de expans√£o/colapso (ChevronDown/ChevronRight)
- ‚úÖ **Drag & Drop Hier√°rquico:**
  - Arrastar p√°gina "sobre" outra ‚Üí Torna filha
  - Arrastar "entre" p√°ginas ‚Üí Reordena no mesmo n√≠vel
  - Valida√ß√£o de ciclos (n√£o pode arrastar para descendente)
  - Feedback visual (linhas de inser√ß√£o, highlight)
  - Cursor "not-allowed" para drops inv√°lidos
- ‚úÖ **Favoritos:**
  - Se√ß√£o separada "Favoritos"
  - Toggle de favorito via estrela
- ‚úÖ **Cria√ß√£o de P√°ginas:**
  - Bot√£o "+" global (cria p√°gina root)
  - Bot√£o "+" em cada p√°gina (cria subp√°gina)
  - Seletor de templates (Blank, Todo, Meeting, Code, Brainstorm)
- ‚úÖ **Renomear P√°ginas:**
  - Inline editing via `AlertDialog`
- ‚úÖ **Deletar P√°ginas:**
  - Com confirma√ß√£o via `AlertDialog`
- ‚úÖ **Menu de Contexto:**
  - Rename, Delete, Duplicate (n√£o implementado)

**Estado de Expans√£o:**
- ‚úÖ Gerenciado via `expandedPageIds` (Set)
- ‚ùå N√£o persiste no localStorage (perde ao recarregar)

---

### ‚úÖ **4. Global Search (Ctrl+K)**
**Arquivos:**
- `src/components/GlobalSearch.tsx`

**Funcionalidades:**
- ‚úÖ **Busca R√°pida:**
  - Atalho `Ctrl/Cmd + K`
  - Busca em t√≠tulos de p√°ginas (in-memory)
  - Busca em conte√∫do de blocos (query no Supabase)
  - Limite de 20 resultados
- ‚úÖ **Debounce de 300ms** - Otimiza√ß√£o de performance
- ‚úÖ **Buscas Recentes:**
  - Salva √∫ltimas 5 buscas no `localStorage`
  - Clique para repetir busca
- ‚úÖ **Navega√ß√£o por Teclado:**
  - `ArrowUp/ArrowDown` - Navegar resultados
  - `Enter` - Selecionar
  - `Escape` - Fechar
- ‚úÖ **Loading State** - Spinner durante busca
- ‚úÖ **Preview de Conte√∫do** - Mostra trecho do bloco encontrado

**Limita√ß√µes:**
- ‚ùå N√£o suporta busca fuzzy (typos)
- ‚ùå N√£o suporta filtros (por tipo, data, autor)

---

### ‚úÖ **5. Auto-Save**
**Arquivos:**
- `src/hooks/useAutoSave.ts`

**Funcionalidades:**
- ‚úÖ **Debounce de 2 segundos** - Salva ap√≥s usu√°rio parar de digitar
- ‚úÖ **Indicador Visual:**
  - `src/components/SaveIndicator.tsx`
  - Estados: "Saving...", "Saved", "Error"
  - Mostra √∫ltima vez salvo (e.g., "Saved 5 seconds ago")
- ‚úÖ **Batch Updates:**
  - Salva m√∫ltiplos blocos de uma vez via `useBatchUpdateBlocks`
- ‚úÖ **Optimistic Updates:**
  - UI atualiza instantaneamente
  - Reverte em caso de erro

---

### ‚úÖ **6. Breadcrumbs Din√¢micos**
**Arquivos:**
- `src/components/Breadcrumbs.tsx`

**Funcionalidades:**
- ‚úÖ Mostra caminho hier√°rquico da p√°gina atual
- ‚úÖ Clic√°vel para navegar para p√°gina pai
- ‚úÖ Usa `parent_id` para reconstruir √°rvore

---

### ‚úÖ **7. Template Selector**
**Arquivos:**
- `src/components/TemplateSelector.tsx`

**Templates Hardcoded:**
1. **Blank** - P√°gina vazia
2. **Todo** - Lista de tarefas com checkboxes
3. **Meeting** - Notas de reuni√£o estruturadas
4. **Code** - Documenta√ß√£o de c√≥digo
5. **Brainstorm** - Sess√£o de ideias

**Limita√ß√µes:**
- ‚ùå Templates est√£o hardcoded (n√£o usa tabela `templates`)
- ‚ùå Usu√°rio n√£o pode salvar p√°ginas como template
- ‚ùå N√£o pode compartilhar templates

---

### ‚úÖ **8. Skeletons Loaders**
**Arquivos:**
- `src/components/SidebarSkeleton.tsx`
- `src/components/EditorSkeleton.tsx`

**Funcionalidades:**
- ‚úÖ Feedback visual durante carregamento inicial
- ‚úÖ Melhora UX percebida

---

## üî¥ Features Pendentes (Roadmap)

### **1. Supabase Storage Integration**
**Prioridade:** üî¥ Alta  
**Raz√£o:** Imagens atualmente salvas como base64 (ineficiente)

**Implementa√ß√£o:**
- Criar bucket p√∫blico `page-images`
- Atualizar `ImageBlock.tsx` para fazer upload
- Salvar URL do Storage no `content` do block
- Adicionar limpeza de imagens √≥rf√£s

---

### **2. Templates do Banco de Dados**
**Prioridade:** üü° M√©dia  
**Raz√£o:** Tabela `templates` existe mas n√£o √© usada

**Implementa√ß√£o:**
- Integrar `useTemplates()` hook
- Adicionar bot√£o "Salvar como template" no editor
- Modal para criar/editar templates
- Se√ß√£o "Meus Templates" na sidebar
- Permitir templates p√∫blicos (community templates)

---

### **3. Colabora√ß√£o em Tempo Real**
**Prioridade:** üü¢ Baixa (complexo)  
**Raz√£o:** Feature avan√ßada do Notion

**Implementa√ß√£o:**
- Habilitar Realtime do Supabase nas tabelas
- Implementar `supabase.channel('pages').on('postgres_changes')`
- Resolver conflitos de edi√ß√£o simult√¢nea
- Mostrar usu√°rios online
- Cursors colaborativos (muito complexo)

---

### **4. Markdown Import/Export**
**Prioridade:** üü° M√©dia  
**Raz√£o:** Interoperabilidade com outros apps

**Implementa√ß√£o:**
- Parser de Markdown ‚Üí Blocos
- Serializer de Blocos ‚Üí Markdown
- Bot√£o "Export as Markdown" no menu
- Bot√£o "Import Markdown file"

---

### **5. Comments & Discussions**
**Prioridade:** üü¢ Baixa  
**Raz√£o:** Feature social

**Implementa√ß√£o:**
- Nova tabela `comments`
- Associar coment√°rios a blocos (`block_id`)
- Thread de respostas
- Notifica√ß√µes

---

### **6. Version History**
**Prioridade:** üü° M√©dia  
**Raz√£o:** Seguran√ßa contra perda de dados

**Implementa√ß√£o:**
- Tabela `page_versions` com snapshots JSON
- Trigger para salvar vers√£o a cada N minutos
- Modal "Version History" com preview
- Restaurar vers√£o anterior

---

### **7. Advanced Search**
**Prioridade:** üü° M√©dia  
**Raz√£o:** Melhorar UX de busca

**Features:**
- Filtros (por tipo, data, autor)
- Busca fuzzy (tolera typos)
- Regex support
- Full-text search do PostgreSQL

---

### **8. User Roles & Permissions**
**Prioridade:** üî¥ Alta (se multi-usu√°rio)  
**Raz√£o:** Workspaces compartilhados

**Implementa√ß√£o:**
- Tabela `workspaces`
- Tabela `workspace_members` (com role: owner, editor, viewer)
- RLS policies baseadas em workspace
- Convites via email

**‚ö†Ô∏è CRITICAL:** 
- Roles DEVEM estar em tabela separada (n√£o em `profiles`)
- Usar `SECURITY DEFINER` function para checar roles
- Evitar privilege escalation attacks

---

### **9. Mobile Responsive**
**Prioridade:** üü° M√©dia  
**Raz√£o:** Usabilidade em smartphones

**Implementa√ß√£o:**
- Sidebar colaps√°vel em mobile
- Touch gestures para drag & drop
- Bottom navigation bar
- Otimizar toolbar flutuante para touch

---

### **10. Dark/Light Theme Toggle**
**Prioridade:** üü¢ Baixa  
**Raz√£o:** `next-themes` j√° est√° instalado

**Implementa√ß√£o:**
- Bot√£o de toggle no header
- Persistir prefer√™ncia no localStorage
- J√° funciona via `next-themes`, s√≥ falta UI

---

### **11. Tabelas (Tables)**
**Prioridade:** üü° M√©dia  
**Raz√£o:** Feature importante do Notion

**Implementa√ß√£o:**
- Novo tipo de bloco `table`
- Metadata para armazenar linhas/colunas
- Adicionar/remover linhas e colunas
- Sorting e filtering

---

### **12. Databases (Notion-style)**
**Prioridade:** üî¥ Alta (feature killer)  
**Raz√£o:** Diferencial do Notion

**Implementa√ß√£o Complexa:**
- Tabela `databases` (cole√ß√µes de p√°ginas)
- Tabela `database_properties` (colunas customizadas)
- Views: Table, Board, Calendar, Gallery, List
- Filtros, sorts, agrupamentos
- Relations entre databases
- Rollups e f√≥rmulas

**Estimativa:** 2-4 semanas de trabalho

---

### **13. API P√∫blica**
**Prioridade:** üü¢ Baixa  
**Raz√£o:** Integra√ß√µes externas

**Implementa√ß√£o:**
- Edge Functions para endpoints
- API Key authentication
- Rate limiting
- Documenta√ß√£o Swagger/OpenAPI

---

### **14. OAuth Providers**
**Prioridade:** üü° M√©dia  
**Raz√£o:** Facilita onboarding

**Implementa√ß√£o:**
- Google Sign-In (Supabase j√° suporta)
- GitHub Sign-In
- Configurar redirect URLs

---

### **15. Reset Password / Forgot Password**
**Prioridade:** üî¥ Alta  
**Raz√£o:** UX essencial

**Implementa√ß√£o:**
- Link "Esqueci a senha" na tela de login
- Email com link de reset (Supabase envia automaticamente)
- Tela para definir nova senha

---

## üêõ Bugs Conhecidos

### **1. Expans√£o de P√°ginas n√£o Persiste**
- **Issue:** `expandedPageIds` perde estado ao recarregar
- **Fix:** Salvar no `localStorage` ou em `user_preferences` table

### **2. Imagens Base64 Aumentam Tamanho do Banco**
- **Issue:** Base64 √© ~33% maior que bin√°rio
- **Fix:** Migrar para Supabase Storage

### **3. Drag & Drop Pode Ficar "Travado"**
- **Issue:** √Äs vezes o drop n√£o funciona corretamente
- **Fix:** Revisar l√≥gica de `customCollisionDetection`

### **4. Auto-Save Pode Causar Race Condition**
- **Issue:** M√∫ltiplas mutations simult√¢neas
- **Fix:** Implementar fila de mutations ou usar `useMutation` com serial mode

---

## üìÅ Estrutura de Arquivos

```
src/
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ blocks/          # Blocos especializados
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CalloutBlock.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ CodeBlock.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ImageBlock.tsx
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ QuoteBlock.tsx
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ToggleBlock.tsx
‚îÇ   ‚îú‚îÄ‚îÄ ui/              # shadcn/ui components (30+ arquivos)
‚îÇ   ‚îú‚îÄ‚îÄ Breadcrumbs.tsx
‚îÇ   ‚îú‚îÄ‚îÄ Editor.tsx       # Editor principal
‚îÇ   ‚îú‚îÄ‚îÄ EditorSkeleton.tsx
‚îÇ   ‚îú‚îÄ‚îÄ GlobalSearch.tsx
‚îÇ   ‚îú‚îÄ‚îÄ ProtectedRoute.tsx
‚îÇ   ‚îú‚îÄ‚îÄ RichTextEditor.tsx
‚îÇ   ‚îú‚îÄ‚îÄ SaveIndicator.tsx
‚îÇ   ‚îú‚îÄ‚îÄ Sidebar.tsx      # Sidebar hier√°rquica
‚îÇ   ‚îú‚îÄ‚îÄ SidebarSkeleton.tsx
‚îÇ   ‚îú‚îÄ‚îÄ SlashMenu.tsx
‚îÇ   ‚îî‚îÄ‚îÄ TemplateSelector.tsx
‚îú‚îÄ‚îÄ contexts/
‚îÇ   ‚îî‚îÄ‚îÄ AuthContext.tsx  # Context de autentica√ß√£o
‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îú‚îÄ‚îÄ use-mobile.tsx
‚îÇ   ‚îú‚îÄ‚îÄ use-toast.ts
‚îÇ   ‚îú‚îÄ‚îÄ useAutoSave.ts   # Auto-save com debounce
‚îÇ   ‚îú‚îÄ‚îÄ useBlocks.ts     # CRUD de blocos
‚îÇ   ‚îú‚îÄ‚îÄ usePageHierarchy.ts # √Årvore hier√°rquica
‚îÇ   ‚îú‚îÄ‚îÄ usePages.ts      # CRUD de p√°ginas
‚îÇ   ‚îî‚îÄ‚îÄ useTemplates.ts  # Busca templates (n√£o usado)
‚îú‚îÄ‚îÄ integrations/supabase/
‚îÇ   ‚îú‚îÄ‚îÄ client.ts        # Cliente Supabase (auto-gerado)
‚îÇ   ‚îî‚îÄ‚îÄ types.ts         # Tipos do DB (auto-gerado)
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îî‚îÄ‚îÄ utils.ts         # Utilit√°rios (cn, etc)
‚îú‚îÄ‚îÄ pages/
‚îÇ   ‚îú‚îÄ‚îÄ Auth.tsx         # Tela de login/signup
‚îÇ   ‚îú‚îÄ‚îÄ Index.tsx        # App principal
‚îÇ   ‚îî‚îÄ‚îÄ NotFound.tsx     # 404
‚îú‚îÄ‚îÄ App.tsx              # Router e providers
‚îú‚îÄ‚îÄ index.css            # Estilos globais + Tailwind
‚îî‚îÄ‚îÄ main.tsx             # Entry point
```

---

## üîê Seguran√ßa

### **Row Level Security (RLS)**
- ‚úÖ Habilitado em todas as tabelas
- ‚úÖ Pol√≠ticas testadas e funcionais
- ‚úÖ Usu√°rios s√≥ veem seus pr√≥prios dados

### **Preven√ß√£o de Ataques**
- ‚úÖ SQL Injection ‚Üí Prevenido pelo Supabase Client
- ‚úÖ XSS ‚Üí React escapa automaticamente
- ‚úÖ CSRF ‚Üí N√£o aplic√°vel (SPA + JWT)
- ‚ùå Rate Limiting ‚Üí N√£o implementado (Supabase tem built-in)

### **‚ö†Ô∏è CRITICAL: Roles Implementation**
Se implementar roles no futuro:
- ‚ùå **NUNCA** armazenar roles em `profiles` ou client-side
- ‚úÖ Criar tabela `user_roles` separada
- ‚úÖ Usar fun√ß√£o `SECURITY DEFINER` para checar roles
- ‚úÖ Evitar recurs√£o em RLS policies

---

## üöÄ Deploy & Infra

### **Lovable Cloud (Atual)**
- ‚úÖ Deploy autom√°tico ao fazer push
- ‚úÖ Supabase gerenciado pelo Lovable
- ‚úÖ SSL/HTTPS autom√°tico
- ‚úÖ CDN global

### **Vari√°veis de Ambiente**
```env
VITE_SUPABASE_URL=https://[projeto].supabase.co
VITE_SUPABASE_PUBLISHABLE_KEY=[anon-key]
VITE_SUPABASE_PROJECT_ID=[id]
```

---

## üìä M√©tricas de Performance

### **Otimiza√ß√µes Implementadas**
- ‚úÖ React Query cache (5 min default)
- ‚úÖ Debounce em busca (300ms)
- ‚úÖ Auto-save debounce (2s)
- ‚úÖ Lazy loading de imagens
- ‚úÖ Code splitting via Vite

### **Oportunidades de Melhoria**
- ‚ùå Virtual scrolling para muitas p√°ginas
- ‚ùå Service Worker para offline mode
- ‚ùå Compression de imagens antes de upload
- ‚ùå Pagination de blocos (se p√°gina muito grande)

---

## üß™ Testing

**Status:** ‚ùå Nenhum teste implementado

**Recomenda√ß√µes:**
- Unit tests com Vitest
- E2E tests com Playwright
- RLS policy tests no Supabase

---

## üìù Conven√ß√µes de C√≥digo

### **Commits Convencionais (Atomic Commits)**
```
feat: adiciona drag & drop hier√°rquico
fix: corrige race condition no auto-save
refactor: separa l√≥gica de hierarquia em hook
docs: atualiza README com novas features
chore: atualiza depend√™ncias

Co-authored-by: Adrianno Esnarriaga <esadrianno@gmail.com>
```

### **TypeScript**
- ‚úÖ Strict mode habilitado
- ‚úÖ Tipos gerados automaticamente do Supabase
- ‚úÖ Interfaces para props de componentes

### **Estiliza√ß√£o**
- ‚úÖ Tailwind utility classes
- ‚úÖ `cn()` helper para merge de classes
- ‚úÖ Design system via shadcn/ui

---

## üéØ Pr√≥ximos Passos Recomendados

### **Curto Prazo (1-2 semanas)**
1. ‚úÖ ~~Implementar P√°ginas Hier√°rquicas~~ (CONCLU√çDO)
2. üî¥ Migrar imagens para Supabase Storage
3. üî¥ Adicionar Reset Password
4. üü° Integrar templates do banco de dados
5. üü° Persistir `expandedPageIds` no localStorage

### **M√©dio Prazo (1 m√™s)**
1. üî¥ Implementar Workspaces + Roles
2. üü° Markdown import/export
3. üü° Version History
4. üü° Advanced Search
5. üü° Dark/Light theme toggle UI

### **Longo Prazo (3+ meses)**
1. üü¢ Colabora√ß√£o em tempo real
2. üî¥ Databases (Notion-style)
3. üü° Mobile responsive
4. üü° Tabelas avan√ßadas
5. üü¢ API p√∫blica

---

## üìö Recursos & Documenta√ß√£o

- **Lovable Docs:** https://docs.lovable.dev/
- **Supabase Docs:** https://supabase.com/docs
- **React Query:** https://tanstack.com/query/latest
- **dnd-kit:** https://docs.dndkit.com/
- **shadcn/ui:** https://ui.shadcn.com/

---

## üë• Colaboradores

- **Adrianno Esnarriaga** <esadrianno@gmail.com> - Co-author
- **Lovable AI** - Development Assistant

---

## üìÑ Licen√ßa

(Definir licen√ßa do projeto)

---

**√öltima Atualiza√ß√£o:** 2025-10-09  
**Status do Projeto:** üü° Em Desenvolvimento Ativo  
**Vers√£o:** 0.1.0 (Pre-release)
